<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.30.1 (20130615.0105)
 -->
<!-- Title: %3 Pages: 1 -->
<svg width="1027pt" height="712pt"
 viewBox="0.00 0.00 1027.00 712.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 708)">
<title>%3</title>
<polygon fill="white" stroke="white" points="-4,5 -4,-708 1024,-708 1024,5 -4,5"/>
<g id="clust1" class="cluster"><title>clusterC</title>
<polygon fill="none" stroke="black" points="8,-8 8,-696 324,-696 324,-8 8,-8"/>
<text text-anchor="middle" x="166" y="-678" font-family="Times,serif" font-size="14.00">Client Flow</text>
</g>
<g id="clust2" class="cluster"><title>clusterS</title>
<polygon fill="none" stroke="black" points="332,-80 332,-696 1011,-696 1011,-80 332,-80"/>
<text text-anchor="middle" x="671.5" y="-678" font-family="Times,serif" font-size="14.00">Server Flow</text>
</g>
<!-- start -->
<g id="node1" class="node"><title>start</title>
<ellipse fill="none" stroke="black" cx="92" cy="-607" rx="52.0243" ry="52.1786"/>
<ellipse fill="none" stroke="black" cx="92" cy="-607" rx="56.0007" ry="56.1668"/>
<text text-anchor="middle" x="92" y="-601.4" font-family="Times,serif" font-size="14.00">Connected</text>
</g>
<!-- sendsrq -->
<g id="node2" class="node"><title>sendsrq</title>
<polygon fill="none" stroke="black" points="159.32,-511 24.6799,-511 24.6799,-475 159.32,-475 159.32,-511"/>
<text text-anchor="middle" x="92" y="-487.4" font-family="Times,serif" font-size="14.00">Send Stream Request</text>
</g>
<!-- start&#45;&gt;sendsrq -->
<g id="edge1" class="edge"><title>start&#45;&gt;sendsrq</title>
<path fill="none" stroke="black" d="M92,-550.656C92,-540.469 92,-530.253 92,-521.357"/>
<polygon fill="black" stroke="black" points="95.5001,-521.251 92,-511.251 88.5001,-521.251 95.5001,-521.251"/>
</g>
<!-- rollback -->
<g id="node3" class="node"><title>rollback</title>
<ellipse fill="none" stroke="black" cx="92" cy="-406" rx="76.2088" ry="29.3315"/>
<text text-anchor="middle" x="92" y="-408.8" font-family="Times,serif" font-size="14.00">Roll back to</text>
<text text-anchor="middle" x="92" y="-392" font-family="Times,serif" font-size="14.00">seq# N or below</text>
</g>
<!-- sendsrq&#45;&gt;rollback -->
<g id="edge2" class="edge"><title>sendsrq&#45;&gt;rollback</title>
<path fill="none" stroke="black" d="M86.4514,-474.799C85.534,-466.358 85.142,-455.824 85.2754,-445.594"/>
<polygon fill="black" stroke="black" points="88.775,-445.658 85.5839,-435.555 81.7783,-445.443 88.775,-445.658"/>
</g>
<!-- waitrepl -->
<g id="node8" class="node"><title>waitrepl</title>
<ellipse fill="none" stroke="black" cx="251" cy="-406" rx="64.4485" ry="18"/>
<text text-anchor="middle" x="251" y="-400.4" font-family="Times,serif" font-size="14.00">Wait for reply</text>
</g>
<!-- sendsrq&#45;&gt;waitrepl -->
<g id="edge3" class="edge"><title>sendsrq&#45;&gt;waitrepl</title>
<path fill="none" stroke="black" d="M124.176,-474.799C150.101,-460.939 186.584,-441.436 213.769,-426.904"/>
<polygon fill="black" stroke="black" points="215.434,-429.982 222.603,-422.181 212.134,-423.809 215.434,-429.982"/>
</g>
<!-- recvsrq -->
<g id="node9" class="node"><title>recvsrq</title>
<polygon fill="none" stroke="black" points="642.179,-513.602 537.821,-513.602 537.821,-472.398 642.179,-472.398 642.179,-513.602"/>
<text text-anchor="middle" x="590" y="-495.8" font-family="Times,serif" font-size="14.00">Receive Stream</text>
<text text-anchor="middle" x="590" y="-479" font-family="Times,serif" font-size="14.00">Request</text>
</g>
<!-- sendsrq&#45;&gt;recvsrq -->
<g id="edge10" class="edge"><title>sendsrq&#45;&gt;recvsrq</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M159.6,-493C282.246,-493 404.892,-493 527.538,-493"/>
<polygon fill="black" stroke="black" points="527.881,-496.5 537.881,-493 527.881,-489.5 527.881,-496.5"/>
</g>
<!-- rollback&#45;&gt;sendsrq -->
<g id="edge5" class="edge"><title>rollback&#45;&gt;sendsrq</title>
<path fill="none" stroke="black" d="M98.4161,-435.555C98.8796,-444.909 98.8606,-455.276 98.359,-464.546"/>
<polygon fill="black" stroke="black" points="94.8476,-464.554 97.5486,-474.799 101.826,-465.106 94.8476,-464.554"/>
</g>
<!-- snapbegin -->
<g id="node4" class="node"><title>snapbegin</title>
<ellipse fill="none" stroke="black" cx="237" cy="-214" rx="71.3955" ry="18"/>
<text text-anchor="middle" x="237" y="-208.4" font-family="Times,serif" font-size="14.00">Snasphot Begin</text>
</g>
<!-- items -->
<g id="node5" class="node"><title>items</title>
<ellipse fill="none" stroke="black" cx="185" cy="-118" rx="71.9885" ry="29.3315"/>
<text text-anchor="middle" x="185" y="-120.8" font-family="Times,serif" font-size="14.00">Items</text>
<text text-anchor="middle" x="185" y="-104" font-family="Times,serif" font-size="14.00">(Exactly&#45;Once)</text>
</g>
<!-- snapbegin&#45;&gt;items -->
<g id="edge7" class="edge"><title>snapbegin&#45;&gt;items</title>
<path fill="none" stroke="black" d="M227.462,-195.759C221.257,-184.542 212.926,-169.482 205.288,-155.674"/>
<polygon fill="black" stroke="black" points="208.301,-153.89 200.397,-146.833 202.175,-157.278 208.301,-153.89"/>
</g>
<!-- snapend -->
<g id="node6" class="node"><title>snapend</title>
<ellipse fill="none" stroke="black" cx="218" cy="-34" rx="64.1281" ry="18"/>
<text text-anchor="middle" x="218" y="-28.4" font-family="Times,serif" font-size="14.00">Snapshot End</text>
</g>
<!-- items&#45;&gt;snapend -->
<g id="edge8" class="edge"><title>items&#45;&gt;snapend</title>
<path fill="none" stroke="black" d="M196.357,-88.7803C199.933,-79.8941 203.867,-70.1179 207.389,-61.3658"/>
<polygon fill="black" stroke="black" points="210.663,-62.6052 211.15,-52.0216 204.169,-59.9918 210.663,-62.6052"/>
</g>
<!-- snapend&#45;&gt;snapbegin -->
<g id="edge9" class="edge"><title>snapend&#45;&gt;snapbegin</title>
<path fill="none" stroke="black" d="M241.902,-50.7586C251.266,-58.3603 260.96,-68.3656 266,-80 281.295,-115.305 265.407,-159.495 251.813,-186.991"/>
<polygon fill="black" stroke="black" points="248.649,-185.49 247.155,-195.979 254.864,-188.711 248.649,-185.49"/>
</g>
<!-- sbegintr -->
<g id="node7" class="node"><title>sbegintr</title>
<polygon fill="none" stroke="black" points="315.431,-328 158.569,-328 158.569,-292 315.431,-292 315.431,-328"/>
<text text-anchor="middle" x="237" y="-304.4" font-family="Times,serif" font-size="14.00">Receive &#39;Snapshot Begin&#39;</text>
</g>
<!-- sbegintr&#45;&gt;snapbegin -->
<g id="edge6" class="edge"><title>sbegintr&#45;&gt;snapbegin</title>
<path fill="none" stroke="black" d="M237,-291.759C237,-277.978 237,-258.4 237,-242.465"/>
<polygon fill="black" stroke="black" points="240.5,-242.132 237,-232.132 233.5,-242.132 240.5,-242.132"/>
</g>
<!-- waitrepl&#45;&gt;sbegintr -->
<g id="edge4" class="edge"><title>waitrepl&#45;&gt;sbegintr</title>
<path fill="none" stroke="black" d="M248.432,-387.759C246.38,-373.978 243.464,-354.4 241.091,-338.465"/>
<polygon fill="black" stroke="black" points="244.487,-337.507 239.552,-328.132 237.563,-338.538 244.487,-337.507"/>
</g>
<!-- ssmine -->
<g id="node12" class="node"><title>ssmine</title>
<ellipse fill="none" stroke="black" cx="476" cy="-406" rx="73.4892" ry="29.3315"/>
<text text-anchor="middle" x="476" y="-408.8" font-family="Times,serif" font-size="14.00">Last Seen Node</text>
<text text-anchor="middle" x="476" y="-392" font-family="Times,serif" font-size="14.00">Is Me?</text>
</g>
<!-- recvsrq&#45;&gt;ssmine -->
<g id="edge17" class="edge"><title>recvsrq&#45;&gt;ssmine</title>
<path fill="none" stroke="black" d="M563.56,-472.286C550.129,-462.272 533.485,-449.862 518.327,-438.559"/>
<polygon fill="black" stroke="black" points="520.197,-435.588 510.088,-432.416 516.013,-441.2 520.197,-435.588"/>
</g>
<!-- ssdiff -->
<g id="node15" class="node"><title>ssdiff</title>
<ellipse fill="none" stroke="black" cx="650" cy="-406" rx="73.4892" ry="29.3315"/>
<text text-anchor="middle" x="650" y="-408.8" font-family="Times,serif" font-size="14.00">Last Seen Node</text>
<text text-anchor="middle" x="650" y="-392" font-family="Times,serif" font-size="14.00">Isn&#39;t me?</text>
</g>
<!-- recvsrq&#45;&gt;ssdiff -->
<g id="edge18" class="edge"><title>recvsrq&#45;&gt;ssdiff</title>
<path fill="none" stroke="black" d="M603.916,-472.286C610.082,-463.55 617.536,-452.991 624.635,-442.934"/>
<polygon fill="black" stroke="black" points="627.571,-444.844 630.478,-434.656 621.852,-440.807 627.571,-444.844"/>
</g>
<!-- ssbmesg -->
<g id="node10" class="node"><title>ssbmesg</title>
<polygon fill="none" stroke="black" points="533.483,-232 340.517,-232 340.517,-196 533.483,-196 533.483,-232"/>
<text text-anchor="middle" x="437" y="-208.4" font-family="Times,serif" font-size="14.00">Send &#39;Snapshot Begin&#39; Message</text>
</g>
<!-- ssbmesg&#45;&gt;sbegintr -->
<g id="edge11" class="edge"><title>ssbmesg&#45;&gt;sbegintr</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M400.714,-232.055C367.522,-247.655 318.281,-270.798 282.475,-287.627"/>
<polygon fill="black" stroke="black" points="280.78,-284.556 273.218,-291.977 283.758,-290.891 280.78,-284.556"/>
</g>
<!-- sssend -->
<g id="node14" class="node"><title>sssend</title>
<ellipse fill="none" stroke="black" cx="437" cy="-118" rx="81.4745" ry="29.3315"/>
<text text-anchor="middle" x="437" y="-120.8" font-family="Times,serif" font-size="14.00">Send Snapshotted</text>
<text text-anchor="middle" x="437" y="-104" font-family="Times,serif" font-size="14.00">Items</text>
</g>
<!-- ssbmesg&#45;&gt;sssend -->
<g id="edge21" class="edge"><title>ssbmesg&#45;&gt;sssend</title>
<path fill="none" stroke="black" d="M437,-195.759C437,-185.136 437,-171.068 437,-157.88"/>
<polygon fill="black" stroke="black" points="440.5,-157.574 437,-147.574 433.5,-157.574 440.5,-157.574"/>
</g>
<!-- sstart -->
<g id="node11" class="node"><title>sstart</title>
<ellipse fill="none" stroke="black" cx="590" cy="-607" rx="52.0243" ry="52.1786"/>
<ellipse fill="none" stroke="black" cx="590" cy="-607" rx="56.0007" ry="56.1668"/>
<text text-anchor="middle" x="590" y="-601.4" font-family="Times,serif" font-size="14.00">Connected</text>
</g>
<!-- sstart&#45;&gt;recvsrq -->
<g id="edge16" class="edge"><title>sstart&#45;&gt;recvsrq</title>
<path fill="none" stroke="black" d="M590,-550.656C590,-541.46 590,-532.239 590,-523.988"/>
<polygon fill="black" stroke="black" points="593.5,-523.782 590,-513.782 586.5,-523.782 593.5,-523.782"/>
</g>
<!-- sstake -->
<g id="node13" class="node"><title>sstake</title>
<ellipse fill="none" stroke="black" cx="445" cy="-310" rx="62.2106" ry="18"/>
<text text-anchor="middle" x="445" y="-304.4" font-family="Times,serif" font-size="14.00">Get Snapshot</text>
</g>
<!-- ssmine&#45;&gt;sstake -->
<g id="edge19" class="edge"><title>ssmine&#45;&gt;sstake</title>
<path fill="none" stroke="black" d="M466.699,-376.797C462.603,-364.376 457.815,-349.857 453.78,-337.623"/>
<polygon fill="black" stroke="black" points="457.056,-336.381 450.6,-327.98 450.408,-338.573 457.056,-336.381"/>
</g>
<!-- sstake&#45;&gt;ssbmesg -->
<g id="edge20" class="edge"><title>sstake&#45;&gt;ssbmesg</title>
<path fill="none" stroke="black" d="M443.533,-291.759C442.36,-277.978 440.694,-258.4 439.337,-242.465"/>
<polygon fill="black" stroke="black" points="442.794,-241.799 438.458,-232.132 435.819,-242.393 442.794,-241.799"/>
</g>
<!-- slookup -->
<g id="node16" class="node"><title>slookup</title>
<ellipse fill="none" stroke="black" cx="666" cy="-310" rx="72.3513" ry="29.3315"/>
<text text-anchor="middle" x="666" y="-312.8" font-family="Times,serif" font-size="14.00">Look Up ID</text>
<text text-anchor="middle" x="666" y="-296" font-family="Times,serif" font-size="14.00">in Failover Log</text>
</g>
<!-- ssdiff&#45;&gt;slookup -->
<g id="edge22" class="edge"><title>ssdiff&#45;&gt;slookup</title>
<path fill="none" stroke="black" d="M654.844,-376.542C656.301,-367.983 657.924,-358.447 659.471,-349.358"/>
<polygon fill="black" stroke="black" points="662.945,-349.807 661.173,-339.361 656.044,-348.632 662.945,-349.807"/>
</g>
<!-- findnext -->
<g id="node17" class="node"><title>findnext</title>
<ellipse fill="none" stroke="black" cx="666" cy="-214" rx="114.133" ry="29.3315"/>
<text text-anchor="middle" x="666" y="-216.8" font-family="Times,serif" font-size="14.00">Find Seq where following</text>
<text text-anchor="middle" x="666" y="-200" font-family="Times,serif" font-size="14.00">node took over</text>
</g>
<!-- slookup&#45;&gt;findnext -->
<g id="edge12" class="edge"><title>slookup&#45;&gt;findnext</title>
<path fill="none" stroke="black" d="M666,-280.542C666,-272.153 666,-262.825 666,-253.899"/>
<polygon fill="black" stroke="black" points="669.5,-253.686 666,-243.686 662.5,-253.686 669.5,-253.686"/>
</g>
<!-- notfound -->
<g id="node19" class="node"><title>notfound</title>
<ellipse fill="none" stroke="black" cx="901" cy="-214" rx="102.325" ry="18"/>
<text text-anchor="middle" x="901" y="-208.4" font-family="Times,serif" font-size="14.00">No entry in failover log</text>
</g>
<!-- slookup&#45;&gt;notfound -->
<g id="edge14" class="edge"><title>slookup&#45;&gt;notfound</title>
<path fill="none" stroke="black" d="M716.413,-288.835C756.657,-272.737 812.689,-250.324 852.437,-234.425"/>
<polygon fill="black" stroke="black" points="853.934,-237.596 861.919,-230.632 851.335,-231.097 853.934,-237.596"/>
</g>
<!-- sendrb -->
<g id="node18" class="node"><title>sendrb</title>
<ellipse fill="none" stroke="black" cx="664" cy="-118" rx="121.331" ry="18"/>
<text text-anchor="middle" x="664" y="-112.4" font-family="Times,serif" font-size="14.00">Send Rollback to Found Seq</text>
</g>
<!-- findnext&#45;&gt;sendrb -->
<g id="edge13" class="edge"><title>findnext&#45;&gt;sendrb</title>
<path fill="none" stroke="black" d="M665.395,-184.542C665.137,-172.461 664.839,-158.434 664.584,-146.464"/>
<polygon fill="black" stroke="black" points="668.077,-146.087 664.365,-136.164 661.079,-146.236 668.077,-146.087"/>
</g>
<!-- sendzero -->
<g id="node20" class="node"><title>sendzero</title>
<ellipse fill="none" stroke="black" cx="902" cy="-118" rx="98.2986" ry="18"/>
<text text-anchor="middle" x="902" y="-112.4" font-family="Times,serif" font-size="14.00">Send Rollback to Zero</text>
</g>
<!-- notfound&#45;&gt;sendzero -->
<g id="edge15" class="edge"><title>notfound&#45;&gt;sendzero</title>
<path fill="none" stroke="black" d="M901.183,-195.759C901.33,-181.978 901.538,-162.4 901.708,-146.465"/>
<polygon fill="black" stroke="black" points="905.211,-146.168 901.818,-136.132 898.211,-146.094 905.211,-146.168"/>
</g>
</g>
</svg>
