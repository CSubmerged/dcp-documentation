<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.30.1 (20130615.0105)
 -->
<!-- Title: %3 Pages: 1 -->
<svg width="1143pt" height="712pt"
 viewBox="0.00 0.00 1143.00 712.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 708)">
<title>%3</title>
<polygon fill="white" stroke="white" points="-4,5 -4,-708 1140,-708 1140,5 -4,5"/>
<g id="clust1" class="cluster"><title>cluster_client</title>
<polygon fill="none" stroke="black" points="8,-8 8,-696 554,-696 554,-8 8,-8"/>
<text text-anchor="middle" x="281" y="-678" font-family="Times,serif" font-size="14.00">Client Flow</text>
</g>
<g id="clust2" class="cluster"><title>cluster_server</title>
<polygon fill="none" stroke="black" points="562,-8 562,-696 1127,-696 1127,-8 562,-8"/>
<text text-anchor="middle" x="844.5" y="-678" font-family="Times,serif" font-size="14.00">Server Flow</text>
</g>
<!-- g1_connected -->
<g id="node1" class="node"><title>g1_connected</title>
<ellipse fill="none" stroke="black" cx="358" cy="-607" rx="52.0243" ry="52.1786"/>
<ellipse fill="none" stroke="black" cx="358" cy="-607" rx="56.0007" ry="56.1668"/>
<text text-anchor="middle" x="358" y="-601.4" font-family="Times,serif" font-size="14.00">Connected</text>
</g>
<!-- send_srq -->
<g id="node2" class="node"><title>send_srq</title>
<polygon fill="none" stroke="black" points="425.32,-514 290.68,-514 290.68,-478 425.32,-478 425.32,-514"/>
<text text-anchor="middle" x="358" y="-490.4" font-family="Times,serif" font-size="14.00">Send Stream Request</text>
</g>
<!-- g1_connected&#45;&gt;send_srq -->
<g id="edge1" class="edge"><title>g1_connected&#45;&gt;send_srq</title>
<path fill="none" stroke="black" d="M358,-550.542C358,-541.431 358,-532.355 358,-524.334"/>
<polygon fill="black" stroke="black" points="361.5,-524.145 358,-514.146 354.5,-524.146 361.5,-524.145"/>
</g>
<!-- g1_wait_for_response -->
<g id="node3" class="node"><title>g1_wait_for_response</title>
<ellipse fill="none" stroke="black" cx="307" cy="-424" rx="82.208" ry="18"/>
<text text-anchor="middle" x="307" y="-418.4" font-family="Times,serif" font-size="14.00">Wait for Response</text>
</g>
<!-- send_srq&#45;&gt;g1_wait_for_response -->
<g id="edge2" class="edge"><title>send_srq&#45;&gt;g1_wait_for_response</title>
<path fill="none" stroke="black" d="M345.393,-477.697C339.403,-469.474 332.124,-459.483 325.521,-450.421"/>
<polygon fill="black" stroke="black" points="328.179,-448.126 319.462,-442.104 322.522,-452.248 328.179,-448.126"/>
</g>
<!-- recv_srq -->
<g id="node13" class="node"><title>recv_srq</title>
<polygon fill="none" stroke="black" points="837.132,-514 684.868,-514 684.868,-478 837.132,-478 837.132,-514"/>
<text text-anchor="middle" x="761" y="-490.4" font-family="Times,serif" font-size="14.00">Receive Stream Request</text>
</g>
<!-- send_srq&#45;&gt;recv_srq -->
<g id="edge26" class="edge"><title>send_srq&#45;&gt;recv_srq</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M425.691,-496C508.656,-496 591.621,-496 674.587,-496"/>
<polygon fill="none" stroke="black" points="674.704,-499.5 684.704,-496 674.704,-492.5 674.704,-499.5"/>
</g>
<!-- recv_rollback -->
<g id="node4" class="node"><title>recv_rollback</title>
<polygon fill="none" stroke="black" points="390.238,-358 223.762,-358 223.762,-322 390.238,-322 390.238,-358"/>
<text text-anchor="middle" x="307" y="-334.4" font-family="Times,serif" font-size="14.00">Get ROLLBACK response</text>
</g>
<!-- g1_wait_for_response&#45;&gt;recv_rollback -->
<g id="edge3" class="edge"><title>g1_wait_for_response&#45;&gt;recv_rollback</title>
<path fill="none" stroke="black" d="M307,-405.61C307,-394.774 307,-380.601 307,-368.291"/>
<polygon fill="black" stroke="black" points="310.5,-368.084 307,-358.084 303.5,-368.084 310.5,-368.084"/>
</g>
<!-- recv_ok -->
<g id="node5" class="node"><title>recv_ok</title>
<polygon fill="none" stroke="black" points="198.316,-358 85.6839,-358 85.6839,-322 198.316,-322 198.316,-358"/>
<text text-anchor="middle" x="142" y="-334.4" font-family="Times,serif" font-size="14.00">Get OK response</text>
</g>
<!-- g1_wait_for_response&#45;&gt;recv_ok -->
<g id="edge4" class="edge"><title>g1_wait_for_response&#45;&gt;recv_ok</title>
<path fill="none" stroke="black" d="M275.186,-407.19C249.693,-394.52 213.658,-376.612 185.497,-362.617"/>
<polygon fill="black" stroke="black" points="186.789,-359.35 176.276,-358.034 183.673,-365.619 186.789,-359.35"/>
</g>
<!-- g1_roll_back_to_indicated_sequence -->
<g id="node6" class="node"><title>g1_roll_back_to_indicated_sequence</title>
<ellipse fill="none" stroke="black" cx="410" cy="-253" rx="135.495" ry="18"/>
<text text-anchor="middle" x="410" y="-247.4" font-family="Times,serif" font-size="14.00">Roll back to Indicated Sequence</text>
</g>
<!-- recv_rollback&#45;&gt;g1_roll_back_to_indicated_sequence -->
<g id="edge5" class="edge"><title>recv_rollback&#45;&gt;g1_roll_back_to_indicated_sequence</title>
<path fill="none" stroke="black" d="M327.844,-321.799C343.302,-309.042 364.553,-291.504 381.57,-277.462"/>
<polygon fill="black" stroke="black" points="384.054,-279.95 389.539,-270.885 379.598,-274.551 384.054,-279.95"/>
</g>
<!-- g1_receive_message_on_stream -->
<g id="node7" class="node"><title>g1_receive_message_on_stream</title>
<ellipse fill="none" stroke="black" cx="136" cy="-253" rx="120.266" ry="18"/>
<text text-anchor="middle" x="136" y="-247.4" font-family="Times,serif" font-size="14.00">Receive Message on Stream</text>
</g>
<!-- recv_ok&#45;&gt;g1_receive_message_on_stream -->
<g id="edge7" class="edge"><title>recv_ok&#45;&gt;g1_receive_message_on_stream</title>
<path fill="none" stroke="black" d="M140.786,-321.799C139.964,-310.163 138.862,-294.548 137.923,-281.237"/>
<polygon fill="black" stroke="black" points="141.408,-280.904 137.212,-271.175 134.425,-281.397 141.408,-280.904"/>
</g>
<!-- g1_roll_back_to_indicated_sequence&#45;&gt;send_srq -->
<g id="edge6" class="edge"><title>g1_roll_back_to_indicated_sequence&#45;&gt;send_srq</title>
<path fill="none" stroke="black" d="M412.085,-271.01C415.554,-304.822 420.119,-382.357 398,-442 394.272,-452.052 387.974,-461.795 381.465,-470.127"/>
<polygon fill="black" stroke="black" points="378.667,-468.018 374.973,-477.948 384.053,-472.489 378.667,-468.018"/>
</g>
<!-- recv_sbegin -->
<g id="node8" class="node"><title>recv_sbegin</title>
<polygon fill="none" stroke="black" points="217.147,-196 64.853,-196 64.853,-160 217.147,-160 217.147,-196"/>
<text text-anchor="middle" x="141" y="-172.4" font-family="Times,serif" font-size="14.00">Receive Snapshot Begin</text>
</g>
<!-- g1_receive_message_on_stream&#45;&gt;recv_sbegin -->
<g id="edge8" class="edge"><title>g1_receive_message_on_stream&#45;&gt;recv_sbegin</title>
<path fill="none" stroke="black" d="M137.185,-234.7C137.764,-226.245 138.475,-215.869 139.125,-206.373"/>
<polygon fill="black" stroke="black" points="142.632,-206.392 139.824,-196.176 135.648,-205.913 142.632,-206.392"/>
</g>
<!-- g1_receive_message_for_snapshot -->
<g id="node9" class="node"><title>g1_receive_message_for_snapshot</title>
<ellipse fill="none" stroke="black" cx="146" cy="-106" rx="129.259" ry="18"/>
<text text-anchor="middle" x="146" y="-100.4" font-family="Times,serif" font-size="14.00">Receive Message for Snapshot</text>
</g>
<!-- recv_sbegin&#45;&gt;g1_receive_message_for_snapshot -->
<g id="edge9" class="edge"><title>recv_sbegin&#45;&gt;g1_receive_message_for_snapshot</title>
<path fill="none" stroke="black" d="M142.236,-159.697C142.787,-151.983 143.449,-142.712 144.063,-134.112"/>
<polygon fill="black" stroke="black" points="147.557,-134.328 144.778,-124.104 140.575,-133.83 147.557,-134.328"/>
</g>
<!-- recv_items -->
<g id="node10" class="node"><title>recv_items</title>
<polygon fill="none" stroke="black" points="193.267,-52 98.7332,-52 98.7332,-16 193.267,-16 193.267,-52"/>
<text text-anchor="middle" x="146" y="-28.4" font-family="Times,serif" font-size="14.00">Receive Items</text>
</g>
<!-- g1_receive_message_for_snapshot&#45;&gt;recv_items -->
<g id="edge10" class="edge"><title>g1_receive_message_for_snapshot&#45;&gt;recv_items</title>
<path fill="none" stroke="black" d="M140.084,-87.6966C139.289,-79.9827 139.062,-70.7125 139.405,-62.1124"/>
<polygon fill="black" stroke="black" points="142.898,-62.3243 140.105,-52.1043 135.915,-61.8356 142.898,-62.3243"/>
</g>
<!-- recv_send -->
<g id="node11" class="node"><title>recv_send</title>
<polygon fill="none" stroke="black" points="359.48,-52 218.52,-52 218.52,-16 359.48,-16 359.48,-52"/>
<text text-anchor="middle" x="289" y="-28.4" font-family="Times,serif" font-size="14.00">Receive Snapshot End</text>
</g>
<!-- g1_receive_message_for_snapshot&#45;&gt;recv_send -->
<g id="edge11" class="edge"><title>g1_receive_message_for_snapshot&#45;&gt;recv_send</title>
<path fill="none" stroke="black" d="M179.527,-88.5881C199.087,-79.0135 223.987,-66.8244 245.097,-56.491"/>
<polygon fill="black" stroke="black" points="246.747,-59.5802 254.19,-52.04 243.669,-53.2931 246.747,-59.5802"/>
</g>
<!-- recv_items&#45;&gt;g1_receive_message_for_snapshot -->
<g id="edge12" class="edge"><title>recv_items&#45;&gt;g1_receive_message_for_snapshot</title>
<path fill="none" stroke="black" d="M151.895,-52.1043C152.701,-59.7913 152.937,-69.0537 152.604,-77.6651"/>
<polygon fill="black" stroke="black" points="149.109,-77.4805 151.916,-87.6966 156.092,-77.9597 149.109,-77.4805"/>
</g>
<!-- recv_send&#45;&gt;g1_receive_message_on_stream -->
<g id="edge13" class="edge"><title>recv_send&#45;&gt;g1_receive_message_on_stream</title>
<path fill="none" stroke="black" d="M291.056,-52.0432C292.6,-70.4479 293.11,-100.311 284,-124 265.228,-172.814 215.509,-209.209 178.854,-230.468"/>
<polygon fill="black" stroke="black" points="176.837,-227.587 169.843,-235.545 180.273,-233.685 176.837,-227.587"/>
</g>
<!-- g2_connected -->
<g id="node12" class="node"><title>g2_connected</title>
<ellipse fill="none" stroke="black" cx="761" cy="-607" rx="52.0243" ry="52.1786"/>
<ellipse fill="none" stroke="black" cx="761" cy="-607" rx="56.0007" ry="56.1668"/>
<text text-anchor="middle" x="761" y="-601.4" font-family="Times,serif" font-size="14.00">Connected</text>
</g>
<!-- g2_connected&#45;&gt;recv_srq -->
<g id="edge14" class="edge"><title>g2_connected&#45;&gt;recv_srq</title>
<path fill="none" stroke="black" d="M761,-550.542C761,-541.431 761,-532.355 761,-524.334"/>
<polygon fill="black" stroke="black" points="764.5,-524.145 761,-514.146 757.5,-524.146 764.5,-524.145"/>
</g>
<!-- g2_is_partition_version_current_ -->
<g id="node14" class="node"><title>g2_is_partition_version_current_</title>
<ellipse fill="none" stroke="black" cx="761" cy="-424" rx="121.451" ry="18"/>
<text text-anchor="middle" x="761" y="-418.4" font-family="Times,serif" font-size="14.00">Is Partition Version Current?</text>
</g>
<!-- recv_srq&#45;&gt;g2_is_partition_version_current_ -->
<g id="edge15" class="edge"><title>recv_srq&#45;&gt;g2_is_partition_version_current_</title>
<path fill="none" stroke="black" d="M761,-477.697C761,-469.983 761,-460.712 761,-452.112"/>
<polygon fill="black" stroke="black" points="764.5,-452.104 761,-442.104 757.5,-452.104 764.5,-452.104"/>
</g>
<!-- send_ok -->
<g id="node15" class="node"><title>send_ok</title>
<polygon fill="none" stroke="black" points="722.196,-358 569.804,-358 569.804,-322 722.196,-322 722.196,-358"/>
<text text-anchor="middle" x="646" y="-334.4" font-family="Times,serif" font-size="14.00">Yes, Send OK Response</text>
</g>
<!-- g2_is_partition_version_current_&#45;&gt;send_ok -->
<g id="edge16" class="edge"><title>g2_is_partition_version_current_&#45;&gt;send_ok</title>
<path fill="none" stroke="black" d="M737.451,-406.208C720.355,-394.018 697.022,-377.381 678.203,-363.962"/>
<polygon fill="black" stroke="black" points="680.087,-361.007 669.913,-358.051 676.023,-366.707 680.087,-361.007"/>
</g>
<!-- g2_no_look_up_version_in_version_history -->
<g id="node16" class="node"><title>g2_no_look_up_version_in_version_history</title>
<ellipse fill="none" stroke="black" cx="830" cy="-340" rx="89.431" ry="29.3315"/>
<text text-anchor="middle" x="830" y="-342.8" font-family="Times,serif" font-size="14.00">No, look up version</text>
<text text-anchor="middle" x="830" y="-326" font-family="Times,serif" font-size="14.00">in version history</text>
</g>
<!-- g2_is_partition_version_current_&#45;&gt;g2_no_look_up_version_in_version_history -->
<g id="edge17" class="edge"><title>g2_is_partition_version_current_&#45;&gt;g2_no_look_up_version_in_version_history</title>
<path fill="none" stroke="black" d="M775.297,-406.01C782.532,-397.412 791.597,-386.639 800.254,-376.35"/>
<polygon fill="black" stroke="black" points="802.998,-378.525 806.758,-368.62 797.642,-374.018 802.998,-378.525"/>
</g>
<!-- g2_take_snapshot -->
<g id="node17" class="node"><title>g2_take_snapshot</title>
<ellipse fill="none" stroke="black" cx="637" cy="-253" rx="67.2323" ry="18"/>
<text text-anchor="middle" x="637" y="-247.4" font-family="Times,serif" font-size="14.00">Take Snapshot</text>
</g>
<!-- send_ok&#45;&gt;g2_take_snapshot -->
<g id="edge18" class="edge"><title>send_ok&#45;&gt;g2_take_snapshot</title>
<path fill="none" stroke="black" d="M644.179,-321.799C642.947,-310.163 641.293,-294.548 639.884,-281.237"/>
<polygon fill="black" stroke="black" points="643.352,-280.751 638.819,-271.175 636.391,-281.488 643.352,-280.751"/>
</g>
<!-- send_ok&#45;&gt;recv_ok -->
<g id="edge27" class="edge"><title>send_ok&#45;&gt;recv_ok</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M618.028,-358.162C599.323,-369.191 573.699,-382.223 549,-388 478.459,-404.499 292.868,-407.147 223,-388 205.375,-383.17 187.697,-373.404 173.372,-363.935"/>
<polygon fill="none" stroke="black" points="175.141,-360.904 164.917,-358.124 171.176,-366.673 175.141,-360.904"/>
</g>
<!-- send_zero -->
<g id="node21" class="node"><title>send_zero</title>
<polygon fill="none" stroke="black" points="887.196,-273.602 722.804,-273.602 722.804,-232.398 887.196,-232.398 887.196,-273.602"/>
<text text-anchor="middle" x="805" y="-255.8" font-family="Times,serif" font-size="14.00">Didn&#39;t find it,</text>
<text text-anchor="middle" x="805" y="-239" font-family="Times,serif" font-size="14.00">send ROLLBACK to Zero</text>
</g>
<!-- g2_no_look_up_version_in_version_history&#45;&gt;send_zero -->
<g id="edge23" class="edge"><title>g2_no_look_up_version_in_version_history&#45;&gt;send_zero</title>
<path fill="none" stroke="black" d="M821.675,-310.696C819.123,-302.018 816.308,-292.448 813.73,-283.681"/>
<polygon fill="black" stroke="black" points="817.021,-282.466 810.841,-273.86 810.305,-284.441 817.021,-282.466"/>
</g>
<!-- send_rollback -->
<g id="node22" class="node"><title>send_rollback</title>
<polygon fill="none" stroke="black" points="1118.18,-273.602 905.825,-273.602 905.825,-232.398 1118.18,-232.398 1118.18,-273.602"/>
<text text-anchor="middle" x="1012" y="-255.8" font-family="Times,serif" font-size="14.00">Found it, send ROLLBACK to Seq</text>
<text text-anchor="middle" x="1012" y="-239" font-family="Times,serif" font-size="14.00">after following entry&#39;s Seq</text>
</g>
<!-- g2_no_look_up_version_in_version_history&#45;&gt;send_rollback -->
<g id="edge24" class="edge"><title>g2_no_look_up_version_in_version_history&#45;&gt;send_rollback</title>
<path fill="none" stroke="black" d="M880.214,-315.548C905.218,-303.871 935.401,-289.774 960.57,-278.02"/>
<polygon fill="black" stroke="black" points="962.37,-281.042 969.949,-273.639 959.407,-274.7 962.37,-281.042"/>
</g>
<!-- send_sbegin -->
<g id="node18" class="node"><title>send_sbegin</title>
<polygon fill="none" stroke="black" points="705.335,-196 570.665,-196 570.665,-160 705.335,-160 705.335,-196"/>
<text text-anchor="middle" x="638" y="-172.4" font-family="Times,serif" font-size="14.00">Send Snapshot Begin</text>
</g>
<!-- g2_take_snapshot&#45;&gt;send_sbegin -->
<g id="edge19" class="edge"><title>g2_take_snapshot&#45;&gt;send_sbegin</title>
<path fill="none" stroke="black" d="M637.237,-234.7C637.353,-226.245 637.495,-215.869 637.625,-206.373"/>
<polygon fill="black" stroke="black" points="641.127,-206.223 637.765,-196.176 634.128,-206.127 641.127,-206.223"/>
</g>
<!-- send_items -->
<g id="node19" class="node"><title>send_items</title>
<polygon fill="none" stroke="black" points="690.954,-124 613.046,-124 613.046,-88 690.954,-88 690.954,-124"/>
<text text-anchor="middle" x="652" y="-100.4" font-family="Times,serif" font-size="14.00">Send Items</text>
</g>
<!-- send_sbegin&#45;&gt;send_items -->
<g id="edge20" class="edge"><title>send_sbegin&#45;&gt;send_items</title>
<path fill="none" stroke="black" d="M641.461,-159.697C643.003,-151.983 644.858,-142.712 646.578,-134.112"/>
<polygon fill="black" stroke="black" points="650.05,-134.597 648.579,-124.104 643.186,-133.224 650.05,-134.597"/>
</g>
<!-- send_sbegin&#45;&gt;recv_sbegin -->
<g id="edge28" class="edge"><title>send_sbegin&#45;&gt;recv_sbegin</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M570.606,-178C456.14,-178 341.675,-178 227.209,-178"/>
<polygon fill="none" stroke="black" points="227.2,-174.5 217.2,-178 227.2,-181.5 227.2,-174.5"/>
</g>
<!-- send_send -->
<g id="node20" class="node"><title>send_send</title>
<polygon fill="none" stroke="black" points="757.167,-52 632.833,-52 632.833,-16 757.167,-16 757.167,-52"/>
<text text-anchor="middle" x="695" y="-28.4" font-family="Times,serif" font-size="14.00">Send Snapshot End</text>
</g>
<!-- send_items&#45;&gt;send_send -->
<g id="edge21" class="edge"><title>send_items&#45;&gt;send_send</title>
<path fill="none" stroke="black" d="M662.629,-87.6966C667.628,-79.5589 673.691,-69.689 679.212,-60.7013"/>
<polygon fill="black" stroke="black" points="682.241,-62.4571 684.493,-52.1043 676.277,-58.7931 682.241,-62.4571"/>
</g>
<!-- send_items&#45;&gt;recv_items -->
<g id="edge30" class="edge"><title>send_items&#45;&gt;recv_items</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M612.776,-97.2178C595.957,-94.0599 576.062,-90.561 558,-88 403.61,-66.1088 362.325,-80.4039 209,-52 207.078,-51.644 205.13,-51.2589 203.167,-50.85"/>
<polygon fill="none" stroke="black" points="203.808,-47.407 193.285,-48.6343 202.277,-54.2374 203.808,-47.407"/>
</g>
<!-- send_send&#45;&gt;g2_take_snapshot -->
<g id="edge22" class="edge"><title>send_send&#45;&gt;g2_take_snapshot</title>
<path fill="none" stroke="black" d="M702.976,-52.0837C716.046,-82.7431 738.266,-148.347 714,-196 706.298,-211.126 692.385,-223.127 678.484,-232.077"/>
<polygon fill="black" stroke="black" points="676.646,-229.098 669.886,-237.256 680.258,-235.095 676.646,-229.098"/>
</g>
<!-- send_send&#45;&gt;recv_send -->
<g id="edge29" class="edge"><title>send_send&#45;&gt;recv_send</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M632.763,-34C545.079,-34 457.396,-34 369.712,-34"/>
<polygon fill="none" stroke="black" points="369.574,-30.5001 359.574,-34 369.574,-37.5001 369.574,-30.5001"/>
</g>
<!-- send_zero&#45;&gt;recv_rollback -->
<g id="edge25" class="edge"><title>send_zero&#45;&gt;recv_rollback</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M722.787,-272.108C719.484,-272.761 716.212,-273.394 713,-274 606.268,-294.129 482.988,-313.292 400.534,-325.527"/>
<polygon fill="none" stroke="black" points="399.814,-322.095 390.434,-327.021 400.839,-329.02 399.814,-322.095"/>
</g>
<!-- send_rollback&#45;&gt;recv_rollback -->
<g id="edge31" class="edge"><title>send_rollback&#45;&gt;recv_rollback</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M905.531,-272.632C902.32,-273.105 899.137,-273.563 896,-274 746.373,-294.845 708.149,-293.33 558,-310 505.907,-315.783 447.764,-322.485 400.566,-327.989"/>
<polygon fill="none" stroke="black" points="399.887,-324.544 390.36,-329.18 400.698,-331.497 399.887,-324.544"/>
</g>
</g>
</svg>
